/*!
 * Bootstrap Fileselect v2.1.0
 * (c) 2016-2020 Jonathan Nessier, Neoflow
 * Licensed under MIT (https://github.com/Neoflow/Bootstrap-Fileselect/blob/master/LICENSE)
 */
!function(i,e){var t=function(i,t){this.$fileInput=e(i),this.options=t,this.userLanguage="en",this.$fileselect=e(this),this.metadata=this.$fileInput.data(),this.$inputGroup=e("<div>").addClass("custom-file"),this.$labelInput=e("<label>").addClass("custom-file-label"),this.translations={en:{rules:{numberOfFiles:"The number of uploadable files is limited to [num] file(s)",fileExtensions:"The files are restricted to following file extensions: [ext]",fileSize:"The file size is limited to [size]"}},de:{rules:{numberOfFiles:"Die Anzahl der hochladbaren Dateien ist limitiert auf [num] Datei(en)",fileExtensions:"Die Dateien sind eingeschränkt auf folgende Dateierweiterungen: [ext]",fileSize:"Die Grösse ist eingeschränkt auf [size] pro Datei"}}},this.init()};t.defaults=(t.prototype={defaults:{browseBtnClass:"btn btn-primary",browseBtnPosition:"right",limit:!1,extensions:!1,allowedFileSize:!1,allowedFileExtensions:!1,allowedNumberOfFiles:!1,language:!1,validationCallback:function(i,e){alert(i)}},init:function(){return this.config=this.loadConfig(),this.translations=this.loadTranslation(),this.$fileInput.addClass("custom-file-input").before(this.$inputGroup),this.$inputGroup.append(this.$fileInput,this.$labelInput),this.$fileInput.on("change",e.proxy(this.changeEvent,this)),e(this)},changeEvent:function(i){this.$fileInput.trigger("bs.fs.change",[this]);var t=this.$fileInput[0].files,s=e.map(t,(function(i){return i.name})).join(", "),n=!1;return this.validateNumberOfFiles(t)&&this.valiateFileExtensions(t)&&this.validateFileSize(t)?(this.$labelInput.text(s),n=!0):this.$fileInput.val(null),this.$fileInput.trigger("bs.fs.changed",[this]),n},loadConfig:function(){var i=e.extend({},this.defaults,this.options,this.metadata);return"string"==typeof i.allowedFileExtensions&&(i.allowedFileExtensions=i.allowedFileExtensions.split(",")),i},loadTranslation:function(){var i=(this.config.language||navigator.language||navigator.userLanguage).substring(0,2).toLowerCase(),t=e.map(this.translations,(function(i,e){return e}));return e.inArray(i,t)>=0?this.userLanguage=i:console.info("User language ("+i+") has no translation. Switched to default language ("+this.userLanguage+")."),this.translations[this.userLanguage]},validateNumberOfFiles:function(i){this.$fileInput.trigger("bs.fs.validate",[this]).trigger("bs.fs.number-of-files-validate",[this]);var e=!0;return this.config.allowedNumberOfFiles&&i.length>parseInt(this.config.allowedNumberOfFiles)&&(this.config.validationCallback(this.translations.rules.numberOfFiles.replace("[num]",this.config.allowedNumberOfFiles),"allowedNumberOfFiles",this),e=!1),this.$fileInput.trigger("bs.fs.validated",[this]).trigger("bs.fs.number-of-files-validated",[this]),e},valiateFileExtensions:function(i){this.$fileInput.trigger("bs.fs.validate",[this]).trigger("bs.fs.file-extensions-validate",[this]);var t=!0;return this.config.allowedFileExtensions&&e.each(i,e.proxy((function(i,s){var n=s.name.replace(/^.*\./,"").toLowerCase();if(-1===e.inArray(n,this.config.allowedFileExtensions))return this.config.validationCallback(this.translations.rules.fileExtensions.replace("[ext]",this.config.allowedFileExtensions.join(", ")),"allowedFileExtensions",this),void(t=!1)}),this)),this.$fileInput.trigger("bs.fs.validated",[this]).trigger("bs.fs.file-extensions-validated",[this]),t},validateFileSize:function(i){this.$fileInput.trigger("bs.fs.validate",[this]).trigger("bs.fs.file-size-validate",[this]);var t=!0;return this.config.allowedFileSize&&e.each(i,e.proxy((function(i,e){if(e.size>this.config.allowedFileSize)return this.config.validationCallback(this.translations.rules.fileSize.replace("[size]",Math.round(this.config.allowedFileSize/1024/1024)+"MB"),"allowedFileSize",this),void(t=!1)}),this)),this.$fileInput.trigger("bs.fs.validated",[this]).trigger("bs.fs.file-size-validated",[this]),t}}).defaults,e.fn.fileselect=function(i){return this.each((function(){new t(this,i)})),this},i.Fileselect=t}(window,jQuery);
/*!
 * Bootstrap Fileselect v1.0
 * https://github.com/Neoflow/Bootstrap-Fileselect
 *
 * Released under the MIT license
 * https://github.com/Neoflow/Bootstrap-Fileselect/blob/master/LICENSE.md
 */
(function(b,c){var a=function(e,d){this.$fileInput=c(e);this.options=d;this.metadata=this.$fileInput.data();this.$inputGroup=c("<div>").addClass("input-group");this.$inputGroupBtn=c("<label>").addClass("input-group-btn");this.$browseBtn=c("<span>");this.$labelInput=c("<input>").attr("type","text").attr("readonly",true).addClass("form-control");this.translations={en:{browse:"Browse",rules:{limit:"The number of uploadable files is limited to [num] file(s)",filelimit:"The files are restricted to following file extensions: [ext]"}},de:{browse:"Durchsuchen",rules:{limit:"Die Anzahl der hochgeladenen Dateien ist limitiert auf [num] Datei(en)",extensions:"Die Dateien sind eingeschr√§nkt auf folgende Dateierweiterungen: [ext]"}}}};a.prototype={defaults:{browseBtnClass:"btn btn-primary",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>',limit:false,extensions:false,language:false},init:function(){this.config=c.extend({},this.defaults,this.options,this.metadata);this.translations=this.loadTranslation();this.$fileInput.hide().after(this.$inputGroup);this.$inputGroup.append(this.$inputGroupBtn,this.$labelInput);this.$inputGroupBtn.append(this.$browseBtn).append(this.$fileInput);this.$browseBtn.addClass(this.config.browseBtnClass).text(this.translations.browse).append(" &hellip;");if(this.config.browseIcon){this.$browseBtn.prepend(this.config.browseIcon,"&nbsp;")}this.$fileInput.on("change",c.proxy(this.changeEvent,this));return this},changeEvent:function(g){var f=this.$fileInput[0].files,d=c.map(f,function(e){return e.name}).join(", ");if(this.validateLimit(f)&&this.valiateExtensions(f)){this.$labelInput.val(d);return true}this.$fileInput.val(null);return false},loadTranslation:function(){var e=this.config.language||navigator.language||navigator.userLanguage,d=c.map(this.translations,function(f,g){return g});if(c.inArray(e,d)===-1){e="en"}return this.translations[e]},validateLimit:function(d){if(this.config.limit&&d.length>parseInt(this.config.limit)){alert(this.translations.rules.limit.replace("[num]",this.config.limit));return false}return true},valiateExtensions:function(e){var d=true;if(this.config.extensions){c.each(e,c.proxy(function(g,f){var h=f.name.replace(/^.*\./,"").toLowerCase();if(c.inArray(h,this.config.extensions)===-1){alert(this.translations.rules.extensions.replace("[ext]",this.config.extensions.join(", ")));d=false;return d}},this))}return d}};a.defaults=a.prototype.defaults;c.fn.fileselect=function(d){return this.each(function(){new a(this,d).init()})};b.Fileselect=a})(window,jQuery);